// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package cloudamqp

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-cloudamqp/sdk/v3/go/cloudamqp/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
)

// Enable PrivateLink for a CloudAMQP instance hosted in AWS. If no existing VPC available when enable
// PrivateLink, a new VPC will be created with subnet `10.52.72.0/24`.
//
// > **Note:** Enabling PrivateLink will automatically add firewall rules for the peered subnet.
// <details>
//
//	<summary>
//	   <i>Default PrivateLink firewall rule</i>
//	 </summary>
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			return nil
//		})
//	}
//
// ```
//
// </details>
//
// Pricing is available at [cloudamqp.com](https://www.cloudamqp.com/plans.html)
// where you can also find more information about
// [CloudAMQP PrivateLink](https://www.cloudamqp.com/docs/cloudamqp-privatelink.html#aws-privatelink).
//
// Only available for dedicated subscription plans.
//
// > **Warning:** This resource considered deprecated and will be removed in next major version (v2.0).
// Recommended to start using the new resource`VpcConnect`.
//
// ## Example Usage
//
// <details>
//
//	<summary>
//	  <b>
//	    <i>CloudAMQP instance without existing VPC</i>
//	  </b>
//	</summary>
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-cloudamqp/sdk/v3/go/cloudamqp"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			instance, err := cloudamqp.NewInstance(ctx, "instance", &cloudamqp.InstanceArgs{
//				Plan:   pulumi.String("bunny-1"),
//				Region: pulumi.String("amazon-web-services::us-west-1"),
//				Tags:   pulumi.StringArray{},
//			})
//			if err != nil {
//				return err
//			}
//			_, err = cloudamqp.NewPrivatelinkAws(ctx, "privatelink", &cloudamqp.PrivatelinkAwsArgs{
//				InstanceId: instance.ID(),
//				AllowedPrincipals: pulumi.StringArray{
//					pulumi.String("arn:aws:iam::aws-account-id:user/user-name"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// </details>
//
// <details>
//
//	<summary>
//	  <b>
//	    <i>CloudAMQP instance in an existing VPC</i>
//	  </b>
//	</summary>
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-cloudamqp/sdk/v3/go/cloudamqp"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			vpc, err := cloudamqp.NewVpc(ctx, "vpc", &cloudamqp.VpcArgs{
//				Region: pulumi.String("amazon-web-services::us-west-1"),
//				Subnet: pulumi.String("10.56.72.0/24"),
//				Tags:   pulumi.StringArray{},
//			})
//			if err != nil {
//				return err
//			}
//			instance, err := cloudamqp.NewInstance(ctx, "instance", &cloudamqp.InstanceArgs{
//				Plan:              pulumi.String("bunny-1"),
//				Region:            pulumi.String("amazon-web-services::us-west-1"),
//				Tags:              pulumi.StringArray{},
//				VpcId:             vpc.ID(),
//				KeepAssociatedVpc: pulumi.Bool(true),
//			})
//			if err != nil {
//				return err
//			}
//			_, err = cloudamqp.NewPrivatelinkAws(ctx, "privatelink", &cloudamqp.PrivatelinkAwsArgs{
//				InstanceId: instance.ID(),
//				AllowedPrincipals: pulumi.StringArray{
//					pulumi.String("arn:aws:iam::aws-account-id:user/user-name"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// </details>
// ### With Additional Firewall Rules
//
// <details>
//
//	<summary>
//	  <b>
//	    <i>CloudAMQP instance in an existing VPC with managed firewall rules</i>
//	  </b>
//	</summary>
//
// ```go
// package main
//
// import (
//
//	"github.com/pulumi/pulumi-cloudamqp/sdk/v3/go/cloudamqp"
//	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
//
// )
//
//	func main() {
//		pulumi.Run(func(ctx *pulumi.Context) error {
//			vpc, err := cloudamqp.NewVpc(ctx, "vpc", &cloudamqp.VpcArgs{
//				Region: pulumi.String("amazon-web-services::us-west-1"),
//				Subnet: pulumi.String("10.56.72.0/24"),
//				Tags:   pulumi.StringArray{},
//			})
//			if err != nil {
//				return err
//			}
//			instance, err := cloudamqp.NewInstance(ctx, "instance", &cloudamqp.InstanceArgs{
//				Plan:              pulumi.String("bunny-1"),
//				Region:            pulumi.String("amazon-web-services::us-west-1"),
//				Tags:              pulumi.StringArray{},
//				VpcId:             vpc.ID(),
//				KeepAssociatedVpc: pulumi.Bool(true),
//			})
//			if err != nil {
//				return err
//			}
//			privatelink, err := cloudamqp.NewPrivatelinkAws(ctx, "privatelink", &cloudamqp.PrivatelinkAwsArgs{
//				InstanceId: instance.ID(),
//				AllowedPrincipals: pulumi.StringArray{
//					pulumi.String("arn:aws:iam::aws-account-id:user/user-name"),
//				},
//			})
//			if err != nil {
//				return err
//			}
//			_, err = cloudamqp.NewSecurityFirewall(ctx, "firewallSettings", &cloudamqp.SecurityFirewallArgs{
//				InstanceId: instance.ID(),
//				Rules: cloudamqp.SecurityFirewallRuleArray{
//					&cloudamqp.SecurityFirewallRuleArgs{
//						Description: pulumi.String("Custom PrivateLink setup"),
//						Ip:          vpc.Subnet,
//						Ports:       pulumi.IntArray{},
//						Services: pulumi.StringArray{
//							pulumi.String("AMQP"),
//							pulumi.String("AMQPS"),
//							pulumi.String("HTTPS"),
//							pulumi.String("STREAM"),
//							pulumi.String("STREAM_SSL"),
//						},
//					},
//					&cloudamqp.SecurityFirewallRuleArgs{
//						Description: pulumi.String("MGMT interface"),
//						Ip:          pulumi.String("0.0.0.0/0"),
//						Ports:       pulumi.IntArray{},
//						Services: pulumi.StringArray{
//							pulumi.String("HTTPS"),
//						},
//					},
//				},
//			}, pulumi.DependsOn([]pulumi.Resource{
//				privatelink,
//			}))
//			if err != nil {
//				return err
//			}
//			return nil
//		})
//	}
//
// ```
//
// </details>
// ## Depedency
//
// This resource depends on CloudAMQP instance identifier, `cloudamqp_instance.instance.id`.
//
// ## Create PrivateLink with additional firewall rules
//
// To create a PrivateLink configuration with additional firewall rules, it's required to chain the SecurityFirewall
// resource to avoid parallel conflicting resource calls. You can do this by making the firewall
// resource depend on the PrivateLink resource, `cloudamqp_privatelink_aws.privatelink`.
//
// Furthermore, since all firewall rules are overwritten, the otherwise automatically added rules for
// the PrivateLink also needs to be added.
//
// ## Import
//
// `cloudamqp_privatelink_aws` can be imported using CloudAMQP internal identifier.
//
// ```sh
// $ pulumi import cloudamqp:index/privatelinkAws:PrivatelinkAws privatelink <id>`
// ```
//
//	The resource uses the same identifier as the CloudAMQP instance. To retrieve the identifier for an instance, either use [CloudAMQP customer API](https://docs.cloudamqp.com/#list-instances) or use the data source [`cloudamqp_account`](./data-sources/account.md).
type PrivatelinkAws struct {
	pulumi.CustomResourceState

	// Covering availability zones used when creating an Endpoint from other VPC.
	ActiveZones pulumi.StringArrayOutput `pulumi:"activeZones"`
	// Allowed principals to access the endpoint service.
	AllowedPrincipals pulumi.StringArrayOutput `pulumi:"allowedPrincipals"`
	// The CloudAMQP instance identifier.
	InstanceId pulumi.IntOutput `pulumi:"instanceId"`
	// Service name of the PrivateLink used when creating the endpoint from other VPC.
	ServiceName pulumi.StringOutput `pulumi:"serviceName"`
	// Configurable sleep time (seconds) when enable PrivateLink.
	// Default set to 10 seconds. *Available from v1.29.0*
	Sleep pulumi.IntPtrOutput `pulumi:"sleep"`
	// PrivateLink status [enable, pending, disable]
	Status pulumi.StringOutput `pulumi:"status"`
	// Configurable timeout time (seconds) when enable PrivateLink.
	// Default set to 1800 seconds. *Available from v1.29.0*
	//
	// Allowed principals format: <br>
	// `arn:aws:iam::aws-account-id:root` <br>
	// `arn:aws:iam::aws-account-id:user/user-name` <br>
	// `arn:aws:iam::aws-account-id:role/role-name`
	Timeout pulumi.IntPtrOutput `pulumi:"timeout"`
}

// NewPrivatelinkAws registers a new resource with the given unique name, arguments, and options.
func NewPrivatelinkAws(ctx *pulumi.Context,
	name string, args *PrivatelinkAwsArgs, opts ...pulumi.ResourceOption) (*PrivatelinkAws, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.AllowedPrincipals == nil {
		return nil, errors.New("invalid value for required argument 'AllowedPrincipals'")
	}
	if args.InstanceId == nil {
		return nil, errors.New("invalid value for required argument 'InstanceId'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource PrivatelinkAws
	err := ctx.RegisterResource("cloudamqp:index/privatelinkAws:PrivatelinkAws", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetPrivatelinkAws gets an existing PrivatelinkAws resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetPrivatelinkAws(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *PrivatelinkAwsState, opts ...pulumi.ResourceOption) (*PrivatelinkAws, error) {
	var resource PrivatelinkAws
	err := ctx.ReadResource("cloudamqp:index/privatelinkAws:PrivatelinkAws", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering PrivatelinkAws resources.
type privatelinkAwsState struct {
	// Covering availability zones used when creating an Endpoint from other VPC.
	ActiveZones []string `pulumi:"activeZones"`
	// Allowed principals to access the endpoint service.
	AllowedPrincipals []string `pulumi:"allowedPrincipals"`
	// The CloudAMQP instance identifier.
	InstanceId *int `pulumi:"instanceId"`
	// Service name of the PrivateLink used when creating the endpoint from other VPC.
	ServiceName *string `pulumi:"serviceName"`
	// Configurable sleep time (seconds) when enable PrivateLink.
	// Default set to 10 seconds. *Available from v1.29.0*
	Sleep *int `pulumi:"sleep"`
	// PrivateLink status [enable, pending, disable]
	Status *string `pulumi:"status"`
	// Configurable timeout time (seconds) when enable PrivateLink.
	// Default set to 1800 seconds. *Available from v1.29.0*
	//
	// Allowed principals format: <br>
	// `arn:aws:iam::aws-account-id:root` <br>
	// `arn:aws:iam::aws-account-id:user/user-name` <br>
	// `arn:aws:iam::aws-account-id:role/role-name`
	Timeout *int `pulumi:"timeout"`
}

type PrivatelinkAwsState struct {
	// Covering availability zones used when creating an Endpoint from other VPC.
	ActiveZones pulumi.StringArrayInput
	// Allowed principals to access the endpoint service.
	AllowedPrincipals pulumi.StringArrayInput
	// The CloudAMQP instance identifier.
	InstanceId pulumi.IntPtrInput
	// Service name of the PrivateLink used when creating the endpoint from other VPC.
	ServiceName pulumi.StringPtrInput
	// Configurable sleep time (seconds) when enable PrivateLink.
	// Default set to 10 seconds. *Available from v1.29.0*
	Sleep pulumi.IntPtrInput
	// PrivateLink status [enable, pending, disable]
	Status pulumi.StringPtrInput
	// Configurable timeout time (seconds) when enable PrivateLink.
	// Default set to 1800 seconds. *Available from v1.29.0*
	//
	// Allowed principals format: <br>
	// `arn:aws:iam::aws-account-id:root` <br>
	// `arn:aws:iam::aws-account-id:user/user-name` <br>
	// `arn:aws:iam::aws-account-id:role/role-name`
	Timeout pulumi.IntPtrInput
}

func (PrivatelinkAwsState) ElementType() reflect.Type {
	return reflect.TypeOf((*privatelinkAwsState)(nil)).Elem()
}

type privatelinkAwsArgs struct {
	// Allowed principals to access the endpoint service.
	AllowedPrincipals []string `pulumi:"allowedPrincipals"`
	// The CloudAMQP instance identifier.
	InstanceId int `pulumi:"instanceId"`
	// Configurable sleep time (seconds) when enable PrivateLink.
	// Default set to 10 seconds. *Available from v1.29.0*
	Sleep *int `pulumi:"sleep"`
	// Configurable timeout time (seconds) when enable PrivateLink.
	// Default set to 1800 seconds. *Available from v1.29.0*
	//
	// Allowed principals format: <br>
	// `arn:aws:iam::aws-account-id:root` <br>
	// `arn:aws:iam::aws-account-id:user/user-name` <br>
	// `arn:aws:iam::aws-account-id:role/role-name`
	Timeout *int `pulumi:"timeout"`
}

// The set of arguments for constructing a PrivatelinkAws resource.
type PrivatelinkAwsArgs struct {
	// Allowed principals to access the endpoint service.
	AllowedPrincipals pulumi.StringArrayInput
	// The CloudAMQP instance identifier.
	InstanceId pulumi.IntInput
	// Configurable sleep time (seconds) when enable PrivateLink.
	// Default set to 10 seconds. *Available from v1.29.0*
	Sleep pulumi.IntPtrInput
	// Configurable timeout time (seconds) when enable PrivateLink.
	// Default set to 1800 seconds. *Available from v1.29.0*
	//
	// Allowed principals format: <br>
	// `arn:aws:iam::aws-account-id:root` <br>
	// `arn:aws:iam::aws-account-id:user/user-name` <br>
	// `arn:aws:iam::aws-account-id:role/role-name`
	Timeout pulumi.IntPtrInput
}

func (PrivatelinkAwsArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*privatelinkAwsArgs)(nil)).Elem()
}

type PrivatelinkAwsInput interface {
	pulumi.Input

	ToPrivatelinkAwsOutput() PrivatelinkAwsOutput
	ToPrivatelinkAwsOutputWithContext(ctx context.Context) PrivatelinkAwsOutput
}

func (*PrivatelinkAws) ElementType() reflect.Type {
	return reflect.TypeOf((**PrivatelinkAws)(nil)).Elem()
}

func (i *PrivatelinkAws) ToPrivatelinkAwsOutput() PrivatelinkAwsOutput {
	return i.ToPrivatelinkAwsOutputWithContext(context.Background())
}

func (i *PrivatelinkAws) ToPrivatelinkAwsOutputWithContext(ctx context.Context) PrivatelinkAwsOutput {
	return pulumi.ToOutputWithContext(ctx, i).(PrivatelinkAwsOutput)
}

// PrivatelinkAwsArrayInput is an input type that accepts PrivatelinkAwsArray and PrivatelinkAwsArrayOutput values.
// You can construct a concrete instance of `PrivatelinkAwsArrayInput` via:
//
//	PrivatelinkAwsArray{ PrivatelinkAwsArgs{...} }
type PrivatelinkAwsArrayInput interface {
	pulumi.Input

	ToPrivatelinkAwsArrayOutput() PrivatelinkAwsArrayOutput
	ToPrivatelinkAwsArrayOutputWithContext(context.Context) PrivatelinkAwsArrayOutput
}

type PrivatelinkAwsArray []PrivatelinkAwsInput

func (PrivatelinkAwsArray) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*PrivatelinkAws)(nil)).Elem()
}

func (i PrivatelinkAwsArray) ToPrivatelinkAwsArrayOutput() PrivatelinkAwsArrayOutput {
	return i.ToPrivatelinkAwsArrayOutputWithContext(context.Background())
}

func (i PrivatelinkAwsArray) ToPrivatelinkAwsArrayOutputWithContext(ctx context.Context) PrivatelinkAwsArrayOutput {
	return pulumi.ToOutputWithContext(ctx, i).(PrivatelinkAwsArrayOutput)
}

// PrivatelinkAwsMapInput is an input type that accepts PrivatelinkAwsMap and PrivatelinkAwsMapOutput values.
// You can construct a concrete instance of `PrivatelinkAwsMapInput` via:
//
//	PrivatelinkAwsMap{ "key": PrivatelinkAwsArgs{...} }
type PrivatelinkAwsMapInput interface {
	pulumi.Input

	ToPrivatelinkAwsMapOutput() PrivatelinkAwsMapOutput
	ToPrivatelinkAwsMapOutputWithContext(context.Context) PrivatelinkAwsMapOutput
}

type PrivatelinkAwsMap map[string]PrivatelinkAwsInput

func (PrivatelinkAwsMap) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*PrivatelinkAws)(nil)).Elem()
}

func (i PrivatelinkAwsMap) ToPrivatelinkAwsMapOutput() PrivatelinkAwsMapOutput {
	return i.ToPrivatelinkAwsMapOutputWithContext(context.Background())
}

func (i PrivatelinkAwsMap) ToPrivatelinkAwsMapOutputWithContext(ctx context.Context) PrivatelinkAwsMapOutput {
	return pulumi.ToOutputWithContext(ctx, i).(PrivatelinkAwsMapOutput)
}

type PrivatelinkAwsOutput struct{ *pulumi.OutputState }

func (PrivatelinkAwsOutput) ElementType() reflect.Type {
	return reflect.TypeOf((**PrivatelinkAws)(nil)).Elem()
}

func (o PrivatelinkAwsOutput) ToPrivatelinkAwsOutput() PrivatelinkAwsOutput {
	return o
}

func (o PrivatelinkAwsOutput) ToPrivatelinkAwsOutputWithContext(ctx context.Context) PrivatelinkAwsOutput {
	return o
}

// Covering availability zones used when creating an Endpoint from other VPC.
func (o PrivatelinkAwsOutput) ActiveZones() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *PrivatelinkAws) pulumi.StringArrayOutput { return v.ActiveZones }).(pulumi.StringArrayOutput)
}

// Allowed principals to access the endpoint service.
func (o PrivatelinkAwsOutput) AllowedPrincipals() pulumi.StringArrayOutput {
	return o.ApplyT(func(v *PrivatelinkAws) pulumi.StringArrayOutput { return v.AllowedPrincipals }).(pulumi.StringArrayOutput)
}

// The CloudAMQP instance identifier.
func (o PrivatelinkAwsOutput) InstanceId() pulumi.IntOutput {
	return o.ApplyT(func(v *PrivatelinkAws) pulumi.IntOutput { return v.InstanceId }).(pulumi.IntOutput)
}

// Service name of the PrivateLink used when creating the endpoint from other VPC.
func (o PrivatelinkAwsOutput) ServiceName() pulumi.StringOutput {
	return o.ApplyT(func(v *PrivatelinkAws) pulumi.StringOutput { return v.ServiceName }).(pulumi.StringOutput)
}

// Configurable sleep time (seconds) when enable PrivateLink.
// Default set to 10 seconds. *Available from v1.29.0*
func (o PrivatelinkAwsOutput) Sleep() pulumi.IntPtrOutput {
	return o.ApplyT(func(v *PrivatelinkAws) pulumi.IntPtrOutput { return v.Sleep }).(pulumi.IntPtrOutput)
}

// PrivateLink status [enable, pending, disable]
func (o PrivatelinkAwsOutput) Status() pulumi.StringOutput {
	return o.ApplyT(func(v *PrivatelinkAws) pulumi.StringOutput { return v.Status }).(pulumi.StringOutput)
}

// Configurable timeout time (seconds) when enable PrivateLink.
// Default set to 1800 seconds. *Available from v1.29.0*
//
// Allowed principals format: <br>
// `arn:aws:iam::aws-account-id:root` <br>
// `arn:aws:iam::aws-account-id:user/user-name` <br>
// `arn:aws:iam::aws-account-id:role/role-name`
func (o PrivatelinkAwsOutput) Timeout() pulumi.IntPtrOutput {
	return o.ApplyT(func(v *PrivatelinkAws) pulumi.IntPtrOutput { return v.Timeout }).(pulumi.IntPtrOutput)
}

type PrivatelinkAwsArrayOutput struct{ *pulumi.OutputState }

func (PrivatelinkAwsArrayOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*[]*PrivatelinkAws)(nil)).Elem()
}

func (o PrivatelinkAwsArrayOutput) ToPrivatelinkAwsArrayOutput() PrivatelinkAwsArrayOutput {
	return o
}

func (o PrivatelinkAwsArrayOutput) ToPrivatelinkAwsArrayOutputWithContext(ctx context.Context) PrivatelinkAwsArrayOutput {
	return o
}

func (o PrivatelinkAwsArrayOutput) Index(i pulumi.IntInput) PrivatelinkAwsOutput {
	return pulumi.All(o, i).ApplyT(func(vs []interface{}) *PrivatelinkAws {
		return vs[0].([]*PrivatelinkAws)[vs[1].(int)]
	}).(PrivatelinkAwsOutput)
}

type PrivatelinkAwsMapOutput struct{ *pulumi.OutputState }

func (PrivatelinkAwsMapOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*map[string]*PrivatelinkAws)(nil)).Elem()
}

func (o PrivatelinkAwsMapOutput) ToPrivatelinkAwsMapOutput() PrivatelinkAwsMapOutput {
	return o
}

func (o PrivatelinkAwsMapOutput) ToPrivatelinkAwsMapOutputWithContext(ctx context.Context) PrivatelinkAwsMapOutput {
	return o
}

func (o PrivatelinkAwsMapOutput) MapIndex(k pulumi.StringInput) PrivatelinkAwsOutput {
	return pulumi.All(o, k).ApplyT(func(vs []interface{}) *PrivatelinkAws {
		return vs[0].(map[string]*PrivatelinkAws)[vs[1].(string)]
	}).(PrivatelinkAwsOutput)
}

func init() {
	pulumi.RegisterInputType(reflect.TypeOf((*PrivatelinkAwsInput)(nil)).Elem(), &PrivatelinkAws{})
	pulumi.RegisterInputType(reflect.TypeOf((*PrivatelinkAwsArrayInput)(nil)).Elem(), PrivatelinkAwsArray{})
	pulumi.RegisterInputType(reflect.TypeOf((*PrivatelinkAwsMapInput)(nil)).Elem(), PrivatelinkAwsMap{})
	pulumi.RegisterOutputType(PrivatelinkAwsOutput{})
	pulumi.RegisterOutputType(PrivatelinkAwsArrayOutput{})
	pulumi.RegisterOutputType(PrivatelinkAwsMapOutput{})
}
